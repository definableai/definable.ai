[pytest]
testpaths = .
asyncio_mode = auto
asyncio_default_fixture_loop_scope = session

markers =
    unit: Pure logic tests — no external calls
    integration: Tests requiring real API calls or external services
    behavioral: Agent behavior tests — may use MockModel or real models
    contract: ABC compliance tests for implementations
    regression: Snapshot-based tests that lock known-good behavior
    openai: Tests requiring OPENAI_API_KEY
    deepseek: Tests requiring DEEPSEEK_API_KEY
    moonshot: Tests requiring MOONSHOT_API_KEY
    xai: Tests requiring XAI_API_KEY
    voyageai: Tests requiring VOYAGEAI_API_KEY
    cohere: Tests requiring COHERE_API_KEY
    mistral: Tests requiring MISTRAL_API_KEY
    mem0: Tests requiring MEM0_API_KEY
    pinecone: Tests requiring PINECONE_API_KEY
    telegram: Tests requiring TELEGRAM_BOT_TOKEN
    discord: Tests requiring DISCORD_BOT_TOKEN
    signal: Tests requiring SIGNAL_PHONE_NUMBER
    postgres: Tests requiring PostgreSQL
    redis: Tests requiring Redis
    qdrant: Tests requiring Qdrant
    chroma: Tests requiring ChromaDB
    mongodb: Tests requiring MongoDB
    playwright: Tests requiring Playwright browser
    desktop: Tests requiring macOS Desktop Bridge
    mcp: Tests requiring npx and MCP server
    slow: Tests that take >10 seconds

addopts = --strict-markers --tb=short -q
