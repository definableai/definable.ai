[pytest]
testpaths = .
asyncio_mode = auto
asyncio_default_fixture_loop_scope = session

markers =
    unit: Pure logic tests — no external calls, always run
    integration: Real API tests — require API keys and/or running services
    behavioral: Agent-level behavior tests — assert on outcomes not internals
    contract: ABC contract compliance — every implementation must pass
    regression: Snapshot-based regression tests — lock in known-good behavior
    slow: Tests that take >10 seconds
    openai: Tests requiring OPENAI_API_KEY
    deepseek: Tests requiring DEEPSEEK_API_KEY
    moonshot: Tests requiring MOONSHOT_API_KEY
    xai: Tests requiring XAI_API_KEY
    voyageai: Tests requiring VOYAGEAI_API_KEY
    cohere: Tests requiring COHERE_API_KEY
    telegram: Tests requiring TELEGRAM_BOT_TOKEN
    discord: Tests requiring DISCORD_BOT_TOKEN
    signal: Tests requiring SIGNAL_PHONE_NUMBER and SIGNAL_API_URL
    postgres: Tests requiring PostgreSQL with pgvector
    redis: Tests requiring Redis server
    qdrant: Tests requiring Qdrant server
    chroma: Tests requiring ChromaDB
    mongodb: Tests requiring MongoDB server
    pinecone: Tests requiring PINECONE_API_KEY
    mem0: Tests requiring MEM0_API_KEY
    mistral: Tests requiring MISTRAL_API_KEY
    playwright: Tests requiring a real browser via Playwright
    desktop: Tests requiring the macOS Desktop Bridge app running

addopts = --strict-markers --tb=short -q
