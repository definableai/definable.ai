{
  "permissions": {
    "allow": [
      "Read(**)",
      "Glob(**)",
      "Grep(**)",
      "Bash(pip install*)",
      "Bash(pip show*)",
      "Bash(pytest*)",
      "Bash(python -m pytest*)",
      "Bash(python -m mypy*)",
      "Bash(python -m ruff*)",
      "Bash(.venv/bin/python*)",
      "Bash(python .workspace/*)",
      "Bash(python -c *)",
      "Bash(source .env.test*)",
      "Bash(source .venv/bin/activate*)",
      "Bash(timeout *)",
      "Bash(gh issue*)",
      "Bash(gh auth status*)",
      "Bash(gh repo view*)",
      "Bash(cat *)",
      "Bash(ls *)",
      "Bash(mkdir *)",
      "Bash(grep *)",
      "Bash(wc *)",
      "Bash(head *)",
      "Bash(tail *)",
      "Bash(date *)",
      "Bash(git status)",
      "Bash(git log*)",
      "Bash(git diff*)",
      "Bash(git branch*)",
      "Bash(python --version*)",
      "Bash(uname -a)",
      "Bash(cd *)",
      "Bash(env | grep *)",
      "Bash(sort *)",
      "Bash(rm -rf .workspace/*)",
      "Bash(find .workspace*)",
      "Write(.env.test)",
      "Write(.workspace/**)",
      "Write(.claude/reports/**)",
      "Write(.claude/memory/**)",
      "Edit(.env.test)",
      "Edit(.workspace/**)",
      "Edit(.claude/reports/**)",
      "Edit(.claude/memory/**)",
      "Read(.claude/memory/**)"
    ],
    "deny": [
      "Read(.env)",
      "Read(.env.local)",
      "Read(.env.production)",
      "Read(**/credentials.json)",
      "Read(**/secrets/**)",
      "Write(definable/**)",
      "Edit(definable/**)",
      "Write(pyproject.toml)",
      "Edit(pyproject.toml)",
      "Write(CLAUDE.md)",
      "Edit(CLAUDE.md)",
      "Write(README.md)",
      "Edit(README.md)",
      "Bash(rm -rf /)",
      "Bash(rm -rf .)",
      "Bash(rm -rf definable*)",
      "Bash(git push*)",
      "Bash(git commit*)",
      "Bash(git checkout*)",
      "Bash(git reset*)",
      "Bash(python -m build*)",
      "Bash(pip publish*)",
      "Bash(twine *)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "input=$(cat); cmd=$(echo \"$input\" | jq -r '.tool_input.command // empty'); if echo \"$cmd\" | grep -qiE '(rm -rf /|rm -rf \\.|mkfs|dd if=|:(){ :|:& };:|curl.*\\| *bash|git reset --hard|git checkout --)'; then echo '{\"block\": true, \"message\": \"Dangerous command blocked.\"}' >&2; exit 2; fi",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "input=$(cat); exit_code=$(echo \"$input\" | jq -r '.tool_result.exitCode // 0'); if [ \"$exit_code\" != \"0\" ]; then echo '{\"feedback\": \"⚠️  Non-zero exit. Check if this is a real failure.\"}'; fi",
            "timeout": 5
          }
        ]
      }
    ]
  },
  "env": {
    "DEFINABLE_TEST_MODE": "true",
    "PYTHON_ENV": "test"
  }
}
